!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=0)}([function(e,t){function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function o(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?n(Object(o),!0).forEach((function(t){a(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,"storeTypesMap",{"shopify-feed":"shopify","shopify-collection-embed":"shopify-embed","cope-store":"cope",cope:"cope","external-link":"external-link"}),a(this,"waitForPushGlobalRetryCount",0),a(this,"pageViewEventFired",!1),a(this,"userEvents",[]),this.init()}var t,n,r;return t=e,(n=[{key:"init",value:function(){var e=this;if(this.addListeners(),document.querySelector("body.search-results")){var t=document.querySelector(".search-term")?document.querySelector(".search-term").innerText:null;if(t){var n=new CustomEvent("umga:search-results",{detail:{searchTerm:t}});window.dispatchEvent(n)}}if(document.querySelector("body.search-no-results")){var o=document.querySelector(".search-term")?document.querySelector(".search-term").innerText:null;if(o){var i=new CustomEvent("umga:no-search-results",{detail:{searchTerm:o}});window.dispatchEvent(i)}}window.addEventListener("load",(function(){e.addOnWindowLoadEventListeners()}))}},{key:"pushGlobalReady",value:function(){"undefined"!=typeof PUSH_GLOBAL?void 0!==window.UMGAnalytics?window.UMGAnalytics.firePageDataLoaded():this.firePageDataLoaded():(this.waitForPushGlobalRetryCount++,this.waitForPushGlobalRetryCount>600?console.log("UMG Analytics: Giving up waiting for PUSH_GLOBAL after 1 minute - something is broke"):setTimeout(this.pushGlobalReady,100))}},{key:"addListeners",value:function(){var e=this;window.addEventListener("umga:social-popup-init",(function(t){return e.socialPopup(t)})),window.addEventListener("umga:social-link-clicked",(function(t){return e.socialLinkClicked(t)})),window.addEventListener("umga:newsletter-signup",(function(t){return e.newsletterSignUp(t)})),window.addEventListener("umga:search-results",(function(t){return e.searchResults(t)})),window.addEventListener("umga:no-search-results",(function(t){return e.noSearchResults(t)})),window.addEventListener("umga:login",(function(t){return e.login(t)})),window.addEventListener("umga:register",(function(t){return e.register(t)})),window.addEventListener("umga:pdp-image-click",(function(t){return e.pdpImageClick(t)})),window.addEventListener("umga:remove-from-cart",(function(t){return e.removeFromCart(t)})),window.addEventListener("umga:product-click",(function(t){return e.productClick(t)})),window.addEventListener("umga:product-impression",(function(t){return e.productImpression(t)})),window.addEventListener("umga:product-detail",(function(t){return e.productDetail(t)})),window.addEventListener("umga:add-to-cart",(function(t){return e.addToCart(t)})),window.addEventListener("umga:checkout",(function(t){return e.checkout(t)})),window.addEventListener("umga:purchase",(function(t){return e.purchase(t)})),window.addEventListener("umga:page-data-loaded",(function(t){return e.pageDataLoaded(t)}))}},{key:"pushStoredEvents",value:function(){for(var e in this.userEvents)window.dataLayer.push(o({},e))}},{key:"socialLinkClicked",value:function(e){var t=e.detail,n=t.platform,o=t.location,i=t.url;this.pushEvent("socialLink",{platform:n,location:o,linkURL:i})}},{key:"socialPopup",value:function(e){var t=e.detail,n=t.name,o=t.text;this.pushEvent("socialPopup",{popupName:n,popupText:o})}},{key:"newsletterSignUp",value:function(e){var t=e.detail,n=t.formName,o=t.platform;this.pushEvent("newsletterSignup",{formName:n,platform:o})}},{key:"searchResults",value:function(e){var t=e.detail.searchTerm;this.pushEvent("searchResults",{searchTerm:t})}},{key:"noSearchResults",value:function(e){var t=e.detail.searchTerm;this.pushEvent("noSearchResults",{searchTerm:t})}},{key:"pdpImageClick",value:function(e){var t=e.detail,n=t.imageName,o=t.imageURL,i=t.products;this.pushEvent("pdpImageClick",{imageName:n,imageURL:o,products:i})}},{key:"removeFromCart",value:function(e){var t=e.detail.ecommerce;this.pushEvent("removeFromCart",{ecommerce:t})}},{key:"productClick",value:function(e){var t=e.detail.ecommerce;this.pushEvent("productClick",{ecommerce:t})}},{key:"productImpression",value:function(e){var t=e.detail.ecommerce;this.pushEvent("productImpression",{ecommerce:t})}},{key:"productDetail",value:function(e){var t=e.detail,n=t.stockStatus,o=t.ecommerce;this.pushEvent("productDetail",{stockStatus:n,ecommerce:o})}},{key:"addToCart",value:function(e){var t=e.detail.ecommerce;this.pushEvent("addToCart",{ecommerce:t})}},{key:"checkout",value:function(e){var t=e.detail.ecommerce;this.pushEvent("checkout",{ecommerce:t})}},{key:"purchase",value:function(e){var t=e.detail.ecommerce;this.pushEvent("purchase",{ecommerce:t})}},{key:"login",value:function(e){var t=e.detail,n=t.userId,o=t.platform;this.pushEvent("login",{userId:n,platform:o})}},{key:"register",value:function(e){var t=e.detail,n=t.userId,o=t.platform;this.pushEvent("register",{userId:n,platform:o})}},{key:"pageDataLoaded",value:function(e){var t=e.detail,n=t.countryCode,o=t.storePlatform,i=t.storeType,a=t.userId;this.pushEvent("pageview",{countryCode:n,storePlatform:o,storeType:i,userId:a})}},{key:"getEvidonAnalyticsConsent",value:function(){var e=null;if(void 0!==window.evidon&&"settings"in evidon){var t=Object.keys(evidon.settings).find((function(e){var t="^"+window.location.host.replace("www.","")+"|d{5}$",n=new RegExp(t,"g");return e.match(n)}));t in evidon.settings&&(e=JSON.parse(localStorage.getItem("_evidon_consent_ls_"+evidon.settings[t].id)))}else if(void 0!==window.evidon&&"notice"in evidon&&"settings"in evidon.notice){var n=Object.keys(evidon.notice.settings).find((function(e){var t="^"+window.location.host.replace("www.","")+"|d{5}$",n=new RegExp(t,"g");return e.match(n)}));n in evidon.notice.settings&&(e=JSON.parse(localStorage.getItem("_evidon_consent_ls_"+evidon.notice.settings[n].id)))}return!!(e&&"categories"in e&&"6"in e.categories&&"performance and analytics"in e.categories[6])&&e.categories[6]["performance and analytics"]}},{key:"pushEvent",value:function(e,t){window.dataLayer=window.dataLayer||[],window.dataLayer.push(o({event:e},t))}},{key:"onLogin",value:function(e,t,n){var o=AEJSWP.getLastLoginService(e.services);if("login"===t){var i=new CustomEvent("umga:login",{detail:{userId:e.data.ID,platform:o.Service}});window.dispatchEvent(i)}else if("registration"===t){var a=new CustomEvent("umga:register",{detail:{userId:e.data.ID,platform:o.Service}});window.dispatchEvent(a)}}},{key:"firePageDataLoaded",value:function(){var e="undefined"!=typeof PUSH_GLOBAL&&"geo_ip_country"in PUSH_GLOBAL?PUSH_GLOBAL.geo_ip_country:null,t=localStorage.getItem("umggr-ecommerce-type");!t&&"undefined"!=typeof UMGGR&&"defaultSoreType"in UMGGR&&(t=UMGGR.defaultSoreType),t||"undefined"==typeof UMGCOPE||(t="cope");var n=(t=t&&this.storeTypesMap[t])?"Embedded Store":null,o="undefined"!=typeof AEJSWP&&void 0!==AEJSWP.aeJS&&void 0!==AEJSWP.aeJS.user&&void 0!==AEJSWP.aeJS.user.data.ID?AEJSWP.aeJS.user.data.ID:"undefined"!=typeof aeJS&&"undefined"!=typeof aeJS&&void 0!==aeJS.user&&void 0!==aeJS.user.data.ID?aeJS.user.data.ID:null,i=new CustomEvent("umga:page-data-loaded",{detail:{countryCode:e,storePlatform:t,storeType:n,userId:o}});window.dispatchEvent(i)}},{key:"addOnWindowLoadEventListeners",value:function(){document.querySelectorAll("[data-umga-social-link]").forEach((function(e){e.addEventListener("click",(function(){var t=e.getAttribute("data-umga-social-link-platform"),n=e.getAttribute("data-umga-social-link-location"),o=e.getAttribute("href"),i=new CustomEvent("umga:social-link-clicked",{detail:{platform:t,location:n,url:o}});window.dispatchEvent(i)}))})),this.pageViewEventFired||this.pushGlobalReady()}},{key:"socialPopUpClicked",value:function(e){localStorage.setItem("umga-social-popup-custom-from-id",e)}},{key:"onWindow",value:function(e){if("popup"===e.type&&"opened"===e.state){var t=localStorage.getItem("umga-social-popup-custom-from-id"),n=AEJSWP.custom_forms[t].flow_labels.signin_title,o=e.service,i=new CustomEvent("umga:social-popup-init",{detail:{name:o,text:n}});window.dispatchEvent(i)}}}])&&i(t.prototype,n),r&&i(t,r),e}();window.UMGAnalytics=new r,window.onload=function(){var e=0,t=!1;customAEJSReady=function(){("undefined"!=typeof AEJSWP&&(AEJSWP.mailingListFormCompleteCallback=function(e){var t="aeJS"in AEJSWP&&"user"in AEJSWP.aeJS&&"services"in AEJSWP.aeJS.user&&AEJSWP.aeJS.user.services?AEJSWP.getLastLoginService(AEJSWP.aeJS.user.services).Service:"email",n=new CustomEvent("umga:newsletter-signup",{detail:{formName:AEJSWP.custom_forms[e].flow_labels.signin_title,platform:t}});window.dispatchEvent(n)}),"undefined"!=typeof AEJSWP&&void 0!==AEJSWP.aeJS)?(AEJSWP.aeJS.events.onLogin.addHandler(window.UMGAnalytics.onLogin),AEJSWP.aeJS.events.onWindow.addHandler(window.UMGAnalytics.onWindow),t||(t=!0,document.querySelectorAll(".ae-cform-container").forEach((function(e){var t=e.getAttribute("data-ae-cform-id");(e.classList.contains("-has-modal")?document.querySelectorAll("#ae-cform-modal-container-".concat(t," .ae-cform-social-link")):document.querySelectorAll("#ae-cform-container-".concat(t," .ae-cform-social-link"))).forEach((function(e){return e.addEventListener("click",(function(){window.UMGAnalytics.socialPopUpClicked(t)}))}))})))):"undefined"!=typeof aeJS?(aeJS.events.onLogin.addHandler(window.UMGAnalytics.onLogin),aeJS.events.onWindow.addHandler(window.UMGAnalytics.onWindow)):++e>600?console.log("UMG Analytics: Giving up waiting for aeJS after 1 minute - something is broke"):setTimeout(window.customAEJSReady,100)},customAEJSReady()}}]);